const root=document.querySelector(".houses__list"),fetchData=e=>fetch(e).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e).catch(e=>{console.error(e)}),beautifyPrice=e=>String(e).length>3?(""+e).replace(/\.|,/g,"").replace(/./,e=>"Â£"+e).replace(/\d{3}$/,e=>","+e):e,makeHouseCard=({title:e,price:o,type:r,address:t})=>{let s="house-card__label ";return"SupportAvailable"===r&&(s="house-card__label-orange"),`\n        <article class="houses__house house-card">\n            <div class="house-card__wrapper">\n                <div class="house-card__content">\n                    <header class="house-card__header">\n                        <figure class="house-card__figure">\n                            <img class="house-card__img" src="https://source.unsplash.com/400x300/?house"\n                                 alt="house footer sale">\n                            <span class=${s}>${r}</span>\n                        </figure>\n                    </header>\n                    <section class="house-card__body">\n                        <h2 class="house-card__title">${e}</h2>\n                        <address class="house-card__address">${t}</address>\n                        <p>New Properties for Sale from <strong>${beautifyPrice(o)}</strong></p>\n                    </section>\n                </div>\n                <footer class="house-card__footer">\n                        Shared Ownership Available\n                </footer>\n            </div>\n        </article>\n    `},renderHouses=(e,o,r)=>{let t=o;r.length>2&&(t=o.filter(e=>new RegExp(r,"i").test(e.title))),t.forEach(o=>{e.insertAdjacentHTML("beforeend",makeHouseCard(o))})},getData=async()=>{const e=await(o="https://603e38c548171b0017b2ecf7.mockapi.io/homes",fetch(o).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e).catch(e=>{console.error(e)}));var o;localStorage.setItem("houses",JSON.stringify(e)),console.log(e),renderHouses(root,e)},setCookie=(e,o,r={})=>{(r={path:"/",...r}).expires instanceof Date&&(r.expires=r.expires.toUTCString());let t=encodeURIComponent(e)+"="+encodeURIComponent(o);for(let e in r){t+="; "+e;let o=r[e];!0!==o&&(t+="="+o)}document.cookie=t},getCookie=e=>{let o=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0},render=(e="")=>{if(!getCookie("houses"))return setCookie("houses",!0,{secure:!0,"max-age":3600}),void getData();renderHouses(root,JSON.parse(localStorage.getItem("houses")),e)};render();const filter=document.getElementById("filter"),filterHandler=e=>{const o=e.target;root.innerHTML="",render(o.value)};filter.addEventListener("input",filterHandler);
//# sourceMappingURL=app.min.js.map
