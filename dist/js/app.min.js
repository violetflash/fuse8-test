const root=document.querySelector(".houses__list"),fetchData=e=>fetch(e).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e).catch(e=>{console.error(e)}),beautifyPrice=e=>String(e).length>3?(""+e).replace(/\.|,/g,"").replace(/./,e=>"Â£"+e).replace(/\d{3}$/,e=>","+e):e,makeHouseCard=({title:e,price:t,type:o,address:r},s)=>{let n=6,l="#";document.body.clientWidth<1200&&(n=4),document.body.clientWidth<650&&(n=2),s<n&&(l="https://source.unsplash.com/400x300/?house");let c="house-card__label ";"SupportAvailable"===o&&(c="house-card__label-orange");let a="houses__house house-card";return s>=n&&(a="houses__house house-card scroll-element js-scroll fade-in-bottom"),`\n        <a class='${a}' href="#">\n            <div class="house-card__wrapper">\n                <div class="house-card__content">\n                    <header class="house-card__header">\n                        <figure class="house-card__figure">\n                            <img id="lazy-img" class="house-card__img" data-src="https://source.unsplash.com/400x300/?house" src="${l}"\n                                 alt="${e}" loading="lazy">\n                            <span class=${c}>${o}</span>\n                        </figure>\n                    </header>\n                    <section class="house-card__body">\n                        <h2 class="house-card__title">${e}</h2>\n                        <address class="house-card__address">${r}</address>\n                        <p>New Properties for Sale from <strong>${beautifyPrice(t)}</strong></p>\n                    </section>\n                </div>\n                <footer class="house-card__footer">\n                        Shared Ownership Available\n                </footer>\n            </div>\n        </a>\n    `},renderHouses=(e,t,o="")=>{let r=t;if(o.length>2&&(r=t.filter(e=>new RegExp(o,"i").test(e.title)),0===r.length))return console.log("empty"),void e.insertAdjacentHTML("beforeend",'\n                <p class="houses__no-match"><em>No match was found for the specified search criteria...</em></p>\n            ');r.forEach((t,o)=>{e.insertAdjacentHTML("beforeend",makeHouseCard(t,o))})},getData=async()=>{const e=await(t="https://603e38c548171b0017b2ecf7.mockapi.io/homes",fetch(t).then(e=>{if(!e.ok)throw e;return e.json()}).then(e=>e).catch(e=>{console.error(e)}));var t;localStorage.setItem("houses",JSON.stringify(e)),renderHouses(root,e),scrollElements=document.querySelectorAll(".js-scroll")},setCookie=(e,t,o={})=>{(o={path:"/",...o}).expires instanceof Date&&(o.expires=o.expires.toUTCString());let r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in o){r+="; "+e;let t=o[e];!0!==t&&(r+="="+t)}document.cookie=r},getCookie=e=>{let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},render=(e="")=>{if(!getCookie("houses"))return setCookie("houses",!0,{secure:!0,"max-age":3600}),void getData();renderHouses(root,JSON.parse(localStorage.getItem("houses")),e)};render();const filter=document.getElementById("filter");let scrollElements=document.querySelectorAll(".js-scroll");const filterHandler=e=>{const t=e.target;root.innerHTML="",render(t.value),scrollElements=document.querySelectorAll(".js-scroll")};filter.addEventListener("input",filterHandler),scrollElements=document.querySelectorAll(".js-scroll");let throttleTimer=!1;const throttle=(e,t)=>{throttleTimer||(throttleTimer=!0,setTimeout(()=>{e(),throttleTimer=!1},t))},elementInView=(e,t=100)=>{const o=e.getBoundingClientRect().top;return(o<=window.innerHeight||o<=document.documentElement.clientHeight)*(t/100)},setSrc=(e,t,o,r)=>{const s=e.querySelector(t);s.src=s.getAttribute(o)},displayElement=e=>{e.classList.add("scrolled"),setSrc(e,".house-card__img","data-src")},handleScrollAnimation=()=>{scrollElements.forEach(e=>{var t;elementInView(e,100)&&((t=e).classList.add("scrolled"),setSrc(t,".house-card__img","data-src"))})};window.addEventListener("scroll",()=>{var e,t;e=handleScrollAnimation,t=250,throttleTimer||(throttleTimer=!0,setTimeout(()=>{e(),throttleTimer=!1},t))});
//# sourceMappingURL=app.min.js.map
